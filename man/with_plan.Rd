% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/with_plan.R
\name{with_plan}
\alias{with_plan}
\title{Temporarily Evaluate an Expression Under a Different Plan}
\usage{
with_plan(plan_fn, expr, ...)
}
\arguments{
\item{plan_fn}{A future plan strategy (e.g., \code{future::multisession}) or a
result from \code{\link[future:plan]{future::tweak()}}.}

\item{expr}{An expression to evaluate under the temporary plan.}

\item{...}{Additional arguments passed to \code{\link[future:plan]{future::plan()}} (e.g.,
\code{workers = 4}).}
}
\value{
The result of evaluating \code{expr} (invisibly).
}
\description{
Sets a \code{\link[future:plan]{future::plan()}}, evaluates \code{expr}, then restores the previous plan.
Modeled after \code{\link[withr:with_options]{withr::with_options()}}.
}
\examples{
\dontrun{
future::plan(future::sequential)

with_plan(future::multisession, workers = 4, {
  future.apply::future_lapply(1:10, sqrt)
})

# plan is back to sequential here
}
}
